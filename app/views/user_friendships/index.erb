<div class="page-header">
  <h1>Friends</h1>
</div>

<div>
  <strong>Friend list:</strong>
  <%= link_to 'Active',    user_friendships_path(list: 'accepted')  %>
  <%= link_to 'Blocked',   user_friendships_path(list: 'blocked')   %>
  <%= link_to 'Pending',   user_friendships_path(list: 'pending')   %>
  <%= link_to 'Requested', user_friendships_path(list: 'requested') %>
</div>

<% @user_friendships.each do |friendship| %>
    <% friend = friendship.friend %>
    <div id="<%= dom_id(friendship) %>" class="friend row">
      <div class="span1">
        <%= link_to image_tag(friend.gravatar_url, class: 'img-circle'), profile_path(friend.profile_name) %>
      </div>
      <div class="span7">
        <strong><%= friend.full_name %></strong>
        <% if friendship.pending? %>
            <em>Friendship is pending.</em>
            <%= link_to 'Delete request.', user_friendship_path(friendship), method: :delete %>
        <% elsif friendship.requested? %>
            <em>Friendship requested.</em>
            <%= link_to 'Accept request.', edit_user_friendship_path(friendship.friend.profile_name) %>
        <% elsif friendship.accepted? %>
            <em>Friendship started <%= time_ago_in_words friendship.updated_at %> ago.</em>
            <%= link_to 'Update friendship.', edit_user_friendship_path(friendship.friend.profile_name) %>
        <% end %>
      </div>
    </div>
<% end %>